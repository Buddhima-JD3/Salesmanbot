'use strict';
const os = require('os');
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
const tty = require('tty');
const hasFlag = require('has-flag');

const {env} = process;
=======
const hasFlag = require('has-flag');

const env = process.env;
>>>>>>> main:admin-backend/node_modules/supports-color/index.js

let forceColor;
if (hasFlag('no-color') ||
	hasFlag('no-colors') ||
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
	hasFlag('color=false') ||
	hasFlag('color=never')) {
	forceColor = 0;
=======
	hasFlag('color=false')) {
	forceColor = false;
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
} else if (hasFlag('color') ||
	hasFlag('colors') ||
	hasFlag('color=true') ||
	hasFlag('color=always')) {
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
	forceColor = 1;
}

if ('FORCE_COLOR' in env) {
	if (env.FORCE_COLOR === 'true') {
		forceColor = 1;
	} else if (env.FORCE_COLOR === 'false') {
		forceColor = 0;
	} else {
		forceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);
	}
=======
	forceColor = true;
}
if ('FORCE_COLOR' in env) {
	forceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
}

function translateLevel(level) {
	if (level === 0) {
		return false;
	}

	return {
		level,
		hasBasic: true,
		has256: level >= 2,
		has16m: level >= 3
	};
}

<<<<<<< HEAD:backend/node_modules/supports-color/index.js
function supportsColor(haveStream, streamIsTTY) {
	if (forceColor === 0) {
=======
function supportsColor(stream) {
	if (forceColor === false) {
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
		return 0;
	}

	if (hasFlag('color=16m') ||
		hasFlag('color=full') ||
		hasFlag('color=truecolor')) {
		return 3;
	}

	if (hasFlag('color=256')) {
		return 2;
	}

<<<<<<< HEAD:backend/node_modules/supports-color/index.js
	if (haveStream && !streamIsTTY && forceColor === undefined) {
		return 0;
	}

	const min = forceColor || 0;

	if (env.TERM === 'dumb') {
		return min;
	}

	if (process.platform === 'win32') {
		// Windows 10 build 10586 is the first Windows release that supports 256 colors.
		// Windows 10 build 14931 is the first release that supports 16m/TrueColor.
		const osRelease = os.release().split('.');
		if (
=======
	if (stream && !stream.isTTY && forceColor !== true) {
		return 0;
	}

	const min = forceColor ? 1 : 0;

	if (process.platform === 'win32') {
		// Node.js 7.5.0 is the first version of Node.js to include a patch to
		// libuv that enables 256 color output on Windows. Anything earlier and it
		// won't work. However, here we target Node.js 8 at minimum as it is an LTS
		// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows
		// release that supports 256 colors. Windows 10 build 14931 is the first release
		// that supports 16m/TrueColor.
		const osRelease = os.release().split('.');
		if (
			Number(process.versions.node.split('.')[0]) >= 8 &&
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
			Number(osRelease[0]) >= 10 &&
			Number(osRelease[2]) >= 10586
		) {
			return Number(osRelease[2]) >= 14931 ? 3 : 2;
		}

		return 1;
	}

	if ('CI' in env) {
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
		if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {
=======
		if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
			return 1;
		}

		return min;
	}

	if ('TEAMCITY_VERSION' in env) {
		return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;
	}

	if (env.COLORTERM === 'truecolor') {
		return 3;
	}

	if ('TERM_PROGRAM' in env) {
		const version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);

		switch (env.TERM_PROGRAM) {
			case 'iTerm.app':
				return version >= 3 ? 3 : 2;
			case 'Apple_Terminal':
				return 2;
			// No default
		}
	}

	if (/-256(color)?$/i.test(env.TERM)) {
		return 2;
	}

	if (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {
		return 1;
	}

	if ('COLORTERM' in env) {
		return 1;
	}

<<<<<<< HEAD:backend/node_modules/supports-color/index.js
=======
	if (env.TERM === 'dumb') {
		return min;
	}

>>>>>>> main:admin-backend/node_modules/supports-color/index.js
	return min;
}

function getSupportLevel(stream) {
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
	const level = supportsColor(stream, stream && stream.isTTY);
=======
	const level = supportsColor(stream);
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
	return translateLevel(level);
}

module.exports = {
	supportsColor: getSupportLevel,
<<<<<<< HEAD:backend/node_modules/supports-color/index.js
	stdout: translateLevel(supportsColor(true, tty.isatty(1))),
	stderr: translateLevel(supportsColor(true, tty.isatty(2)))
=======
	stdout: getSupportLevel(process.stdout),
	stderr: getSupportLevel(process.stderr)
>>>>>>> main:admin-backend/node_modules/supports-color/index.js
};
